//默认菜单
var defaultData = [{
    text: '用户行为',
    tags: ['8101'],
    nodes: [{
        text: '流量分析',
        tags: ['8102']
    }, {
        text: '登入分析',
        tags: ['8103']
    }, {
        text: '用户关注',
        tags: ['8104']
    }]
}, {
    text: '运营分析',
    tags: ['8105'],
    nodes: [{
        text: '总览',
        tags: ['8106']
    }, {
        text: '注册分析',
        tags: ['8107'],

        nodes: [{
            text: '日新增用户',
            tags: ['8108']
        }, {
            text: '认证用户',
            tags: ['8109']
        }, {
            text: '签章、支付开通分析',
            tags: ['8116']
        }]
    }, {
        text: '店铺分析',
        tags: ['8110'],
        nodes: [{
            text: '店铺激活',
            tags: ['8111']
        }, {
            text: '店铺运营',
            tags: ['8112']
        }]
    }, {
        text: '成交分析',
        tags: ['8113'],
        nodes: [{
            text: '成交概览',
            tags: ['8114']
        }, {
            text: '地域金额',
            tags: ['8115']
        }]
    }]
}];

// 聚贸通
var tree_data_102000 = [{
    text: '用户行为',
    tags: ['81701'],
    nodes: [{
        text: '流量分析',
        tags: ['81702']
    }]
}, {
    text: '运营情况',
    tags: ['81703'],
    nodes: [{
        text: '总览',
        tags: ['81704']
    }, {
        text: '区域订单统计',
        tags: ['81705']
    }, {
        text: '企业分类统计',
        tags: ['81706']
    }, {
        text: '进出口分类统计',
        tags: ['81707']
    }]
}];

// 交易总站
var tree_data_100100 = [{
    text: '用户行为',
    tags: ['8001'],
    nodes: [{
        text: '流量分析',
        tags: ['8002']
    }, {
        text: '分流关注分析',
        tags: ['8003']
    }, {
        text: '登录分析',
        tags: ['8004']
    }]
}, {
    text: '运营情况',
    tags: ['8005'],
    nodes: [{
        text: '运营总览',
        tags: ['8006']
    }, {
        text: '注册分析',
        tags: ['8007'],
        state: {
            disabled: true
        }
    }, {
        text: '商品分析',
        tags: ['8008']
    }, {
        text: '店铺运营分析',
        tags: ['8009']
    }, {
        text: '成交分析',
        tags: ['8010'],
        nodes: [{
            text: '总体情况',
            tags: ['8011']
        }, {
            text: '交易分析',
            tags: ['8012']
        }]
    }]
}];

// 聚运通
var tree_data_100400 = [{
    text: '用户行为',
    tags: ['81201'],
    nodes: [{
        text: '流量分析',
        tags: ['81202']
    }, {
        text: '登入分析',
        tags: ['81203']
    }, {
        text: '用户关注',
        tags: ['81204']
    }]
}, {
    text: '运营情况',
    tags: ['81205'],
    nodes: [{
        text: '总览',
        tags: ['81206']
    }, {
        text: '注册分析',
        tags: ['81207'],
        nodes: [{
            text: '日新增用户',
            tags: ['81208']
        }, {
            text: '企业用户',
            tags: ['81209']
        }, {
            text: '支付分析',
            tags: ['81210']
        }, {
            text: '运力分析',
            tags: ['81211']
        }, {
            text: '仓储分析',
            tags: ['81212']
        }]
    }]
}, {
    text: '成交分析',
    tags: ['81213'],
    nodes: [{
        text: '成交概览',
        tags: ['81214']
    }, {
        text: '物流商分析',
        tags: ['81215']
    }, {
        text: '交易地域分析',
        tags: ['81216']
    }, {
        text: '物流方式分析',
        tags: ['81217']
    }]
}];

// 聚融通
var tree_data_101500 = [{
    text: '用户行为',
    tags: ['81301'],
    nodes: [{
        text: '流量分析',
        tags: ['81302']
    }, {
        text: '登入分析',
        tags: ['81303']
    }]
}, {
    text: '运营情况',
    tags: ['81304'],
    nodes: [{
        text: '总览',
        tags: ['81305']
    }, {
        text: '业务分析',
        tags: ['81306']
    }]
}];

// 聚咨询
var tree_data_101900 = [{
    text: '用户行为',
    tags: ['81601'],
    nodes: [{
        text: '流量分析',
        tags: ['81602']
    }, {
        text: '来源分析',
        tags: ['81603']
    }, {
        text: '登入分析',
        tags: ['81604']
    }]
}, {
    text: '运营情况',
    tags: ['81605'],
    nodes: [{
        text: '运营分析',
        tags: ['81606']
    }]
}];

// 聚融通英文版
var tree_data_101501 = [{
    text: '用户行为',
    tags: ['91301'],
    nodes: [{
        text: '流量分析',
        tags: ['91302']
    }, {
        text: '登入分析',
        tags: ['91303']
    }]
}, {
    text: '运营情况',
    tags: ['91304'],
    nodes: [{
        text: '总览',
        tags: ['91305']
    }, {
        text: '业务分析',
        tags: ['91306']
    }]
}];

// 聚咨询
var tree_data_101901 = [{
    text: '用户行为',
    tags: ['91601'],
    nodes: [{
        text: '流量分析',
        tags: ['91602']
    }, {
        text: '登入分析',
        tags: ['91603']
    }]
}, {
    text: '运营情况',
    tags: ['91604'],
    nodes: [{
        text: '运营分析',
        tags: ['91605']
    }]
}];

// 交易总站BI英文版
var tree_data_100101 = [{
    text: '概况',
    tags: ['9001']
}, {
    text: '来源分析',
    tags: ['9002']
}, {
    text: '访问路径',
    tags: ['9003']
}, {
    text: '站内活动',
    tags: ['9004']
}];

// 聚运通英文版
var tree_data_100401 = [{
    text: '用户行为',
    tags: ['91201'],
    nodes: [{
        text: '流量分析',
        tags: ['91202']
    }, {
        text: '登入分析',
        tags: ['91203']
    }, {
        text: '用户关注',
        tags: ['91204']
    }]
}, {
    text: '运营情况',
    tags: ['91205'],
    nodes: [{
        text: '总览',
        tags: ['91206']
    }, {
        text: '注册分析',
        tags: ['91207'],
        nodes: [{
            text: '日新增用户',
            tags: ['91208']
        }, {
            text: '企业用户',
            tags: ['91209']
        }, {
            text: '支付分析',
            tags: ['91210']
        }, {
            text: '运力分析',
            tags: ['91211']
        }, {
            text: '仓储分析',
            tags: ['91212']
        }]
    }]
}, {
    text: '成交分析',
    tags: ['91213'],
    nodes: [{
        text: '成交概览',
        tags: ['91214']
    }, {
        text: '物流商分析',
        tags: ['91215']
    }, {
        text: '交易地域分析',
        tags: ['91216']
    }, {
        text: '物流方式分析',
        tags: ['91217']
    }]
}];

var treeIds = {
    "i8101": 0,
    "i8102": 1,
    "i8103": 2,
    "i8104": 3,
    "i8105": 4,
    "i8106": 5,
    "i8107": 6,
    "i8108": 7,
    "i8109": 8,
    "i8116": 9,
    "i8110": 10,
    "i8111": 11,
    "i8112": 12,
    "i8113": 13,
    "i8114": 14,
    "i8115": 15,
    "i81701": 0,
    "i81702": 1,
    "i81703": 2,
    "i81704": 3,
    "i81705": 4,
    "i81706": 5,
    "i81707": 6,
    "i8001": 0,
    "i8002": 1,
    "i8003": 2,
    "i8004": 3,
    "i8005": 4,
    "i8006": 5,
    "i8007": 6,
    "i8008": 7,
    "i8009": 8,
    "i8010": 9,
    "i8011": 10,
    "i8012": 11,
    "i8013": 12,
    "i8014": 13,
    "i8015": 14,
    "i8016": 15,
    "i8017": 16,
    "i81201": 0,
    "i81202": 1,
    "i81203": 2,
    "i81204": 3,
    "i81205": 4,
    "i81206": 5,
    "i81207": 6,
    "i81208": 7,
    "i81209": 8,
    "i81210": 9,
    "i81211": 10,
    "i81212": 11,
    "i81213": 12,
    "i81214": 13,
    "i81215": 14,
    "i81216": 15,
    "i81217": 16,
    "i81301": 0,
    "i81302": 1,
    "i81303": 2,
    "i81304": 3,
    "i81305": 4,
    "i81306": 5,
    "i81601": 0,
    "i81602": 1,
    "i81603": 2,
    "i81604": 3,
    "i81605": 4,
    "i81606": 5,
    "i91301": 0,
    "i91302": 1,
    "i91303": 2,
    "i91304": 3,
    "i91305": 4,
    "i91306": 5,
    "i91601": 0,
    "i91602": 1,
    "i91603": 2,
    "i91604": 3,
    "i91605": 4,
    "i9001": 0,
    "i9002": 1,
    "i9003": 2,
    "i9004": 3,
    "i91201": 0,
    "i91202": 1,
    "i91203": 2,
    "i91204": 3,
    "i91205": 4,
    "i91206": 5,
    "i91207": 6,
    "i91208": 7,
    "i91209": 8,
    "i91210": 9,
    "i91211": 10,
    "i91212": 11,
    "i91213": 12,
    "i91214": 13,
    "i91215": 14,
    "i91216": 15,
    "i91217": 16
};
//


function updateChildNodesCheckStatus(treeId, childNodes, checkedType) {
    for (var i in childNodes) {
        $(treeId).treeview(checkedType, [childNodes[i].nodeId, {
            silent: true
        }]);
        var checkedStatus = getCurrentNodeCheckStatus(treeId,
            childNodes[i].nodeId)

        updateChildNodesCheckStatus(treeId, childNodes[i].nodes, checkedType)
    }
}
function updateParentCheckState(treeId, checkingNode) {
    var parentId = checkingNode.parentId
    if (typeof (parentId) == "undefined") {
        return;
    }
    var siblingsNodes = $(treeId).treeview('getSiblings', checkingNode) || [];

    // 包含自身节点
    siblingsNodes.push(checkingNode)

    var count = 0;
    for (var i in siblingsNodes) {
        var checkStatus = getCurrentNodeCheckStatus(treeId, siblingsNodes[i])
        if (!checkStatus) {

            $(treeId).treeview('uncheckNode', [parentId, {
                silent: true
            }]);

            break;
        }

        if (checkStatus) {
            count++;
        }
    }
    if (siblingsNodes.length === count) {

        $(treeId).treeview('checkNode', [parentId, {
            silent: true
        }]);

    }

    var parentNode = $(treeId).treeview('getNode', parentId);

    updateParentCheckState(treeId, parentNode)
}

function getCurrentNodeCheckStatus(treeId, currentNode) {
    var allCheckedNodes = $(treeId).treeview('getChecked')
    for (var i = 0; i < allCheckedNodes.length; i++) {
        var node = allCheckedNodes[i]
        if (node.nodeId === currentNode.nodeId) {
            return true;
        }
    }

    return false;
}

//切换
var myclick = function (v) {
    var llis = document.getElementsByTagName("span");
    for (var i = 0; i < llis.length; i++) {
        var lli = llis[i];
        if (lli == document.getElementById("tab" + v)) {
            lli.className = "tab selected";
        } else {
            lli.className = "tab";
        }
    }

    var divs = document.getElementsByClassName("item-list");
    for (var i = 0; i < divs.length; i++) {

        var divv = divs[i];

        if (divv == document.getElementById("tab" + v + "_content")) {
            divv.style.display = " block";
        } else {
            divv.style.display = "none";
        }

    }

}
