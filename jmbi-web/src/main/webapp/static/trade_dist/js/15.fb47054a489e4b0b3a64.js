webpackJsonp([15],{625:function(t,e,a){a(776);var r=a(80)(a(696),a(808),null,null);t.exports=r.exports},636:function(t,e,a){"use strict";function r(t){var e=t.toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,e=new Date(t),a=e.getDay(),r=e.getDate(),i=r-a;return e.setDate(i),e}function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,e=new Date(t),a=e.getDay(),r=e.getDate(),i=6-a,n=r+i;return e.setDate(n),e}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,e=new Date(t);return e.setDate(1),e}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,e=new Date(t),a=e.getMonth(),r=a+1;return e.setMonth(r,0),e}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,e=new Date(t),a=e.getMonth();return a>=0&&a<=2&&e.setMonth(0,1),a>=3&&a<=5&&e.setMonth(3,1),a>=6&&a<=8&&e.setMonth(6,1),a>=9&&a<=11&&e.setMonth(9,1),e}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,e=new Date(t),a=e.getMonth();return a>=0&&a<=2&&e.setMonth(3,0),a>=3&&a<=5&&e.setMonth(6,0),a>=6&&a<=8&&e.setMonth(9,0),a>=9&&a<=11&&e.setMonth(12,0),e}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,e=new Date(t);return e.setMonth(0,1),e}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,e=new Date(t);return e.setMonth(12,0),e}function u(t){var e=t.match(/\d+/g),a=+e[0],r=+e[1],i=new Date(a,0,1),n=g(r),o=i.getTime()+n,l=i.setTime(o);return new Date(l)}function g(t){return 6048e5*(t-1)}function m(t){if(8!==t.length)return new Date;var e=+t.substring(0,4),a=Number(t.substring(4,6))-1,r=+t.substring(6,8);return new Date(e,a,r)}function f(t,e){return Math.round((e-t)/864e5)}function p(t){return 8!==t.length?new Date:+t.substring(0,4)+"年"+Number(t.substring(4,6))+"月"+ +t.substring(6,8)+"日"}String.prototype.padStart||(String.prototype.padStart=function(t,e){return t>>=0,e=String(e||" "),this.length>t?String(this):(t-=this.length,t>e.length&&(e+=e.repeat(t/e.length)),e.slice(0,t)+String(this))}),Date.prototype.format=function(){return""+this.getFullYear()+(this.getMonth()+1).toString().padStart(2,"0")+this.getDate().toString().padStart(2,"0")},e.a={firstDayOfWeek:i,lastDayOfWeek:n,firstDayOfMonth:o,lastDayOfMonth:l,firstDayOfQuarter:s,lastDayOfQuarter:d,firstDayOfYear:c,lastDayOfYear:h,getDayByWeek:u,numberWithCommas:r,parseDate:m,formatDate:p,daydiff:f}},657:function(t,e,a){"use strict";function r(t,e){o=e,t.$emit("pick",i(e))}function i(t){var e=new Date,a=new Date,r=new Date;if(1===t)r.setDate(1);else{var i=e.getMonth();e.setMonth(i-1,1),r=n.a.firstDayOfMonth(e),a=n.a.lastDayOfMonth(e)}return[r,a]}Object.defineProperty(e,"__esModule",{value:!0});var n=a(636),o=1;e.default={name:"rangeDatePicker2",created:function(){var t=new Date;t.setDate(1),this.global_time_filter_value[0]=t,o=1,this.loadDatePeriodByQuery()},data:function(){return{currentMonth:"primary",PreviousMonth:"",global_time_filter_value:[new Date,new Date],globalPickerOptions:{shortcuts:[{text:"本月",onClick:function(t){r(t,1)}},{text:"上月",onClick:function(t){r(t,2)}}]}}},methods:{dateChanged:function(){var t=this.global_time_filter_value[0].format(),e=this.global_time_filter_value[1].format();this.$router.push({path:this.$router.path,query:{startDate:t,endDate:e}}),this.$emit("selectedRangeDate",{startDate:t,endDate:e});var a=this.getPeriodIndex(this.global_time_filter_value[0],this.global_time_filter_value[1]);this.updateFilterButtonState(a),o=-1},selectDatePeriod:function(t){o=t,this.global_time_filter_value=i(t),this.updateFilterButtonState(o)},loadDatePeriodByQuery:function(){var t=this.$route.query;if(t.startDate&&t.endDate){var e=t.startDate,a=t.endDate;e=n.a.parseDate(e),a=n.a.parseDate(a);var r=this.getPeriodIndex(e,a);o=-1,this.updateFilterButtonState(r),this.global_time_filter_value=[e,a]}},getPeriodIndex:function(t,e){var a=n.a.daydiff(t,e);if(a+1===e.getDate()&&e.format()===(new Date).format())a=1;else{var r=new Date,i=r.getMonth();r.setMonth(i,0);var o=new Date;o.setMonth(i-1,1),a=r.format()===e.format()&&t.format()===o.format()?2:-1}return a},updateFilterButtonState:function(t){switch(t){case 1:this.currentMonth="primary",this.PreviousMonth="";break;case 2:this.currentMonth="",this.PreviousMonth="primary";break;default:this.currentMonth="",this.PreviousMonth=""}}},mounted:function(){function t(){document.body.scrollTop>113?(e.style.position="fixed",e.style.top="40px",e.style.left="192px",e.style.right="20px",e.style.zIndex=4e4):(e.style.position="static",e.style.top="",e.style.left="",e.style.right="")}window.addEventListener("resize",t,!1),window.addEventListener("scroll",t,!1);var e=document.querySelector(".primary-timer-filter")}}},658:function(t,e,a){e=t.exports=a(609)(),e.push([t.i,".primary-timer-filter .el-button{padding-top:8px;padding-bottom:8px}","",{version:3,sources:["F:/Developer/2016/big-data/jmdata/code/jmbi/trunk/jmbi-web/src/main/webapp/app-trade-bi/src/components/RangeDatePicker2.vue"],names:[],mappings:"AACA,iCACE,gBAAiB,AACjB,kBAAoB,CACrB",file:"RangeDatePicker2.vue",sourcesContent:["\n.primary-timer-filter .el-button {\n  padding-top: 8px;\n  padding-bottom: 8px;\n}\n"],sourceRoot:""}])},659:function(t,e,a){var r=a(658);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(610)("b796cc2c",r,!0)},660:function(t,e,a){a(659);var r=a(80)(a(657),a(661),null,null);t.exports=r.exports},661:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"jm-grid-box-border-radius jm-grid-box-bg-white jm-grid-border-1px jm-padding-15X20 jm-margin-top20 jm-margin-bottom20 primary-timer-filter"},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[a("span",[t._v("时间段选择：")]),t._v(" "),a("el-button",{attrs:{type:t.currentMonth},on:{click:function(e){t.selectDatePeriod(1)}}},[t._v("本月")]),t._v(" "),a("el-button",{attrs:{type:t.PreviousMonth},on:{click:function(e){t.selectDatePeriod(2)}}},[t._v("上月")])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content clearfix"},[a("el-date-picker",{staticClass:"right",attrs:{editable:!1,clearable:!1,type:"daterange","picker-options":t.globalPickerOptions,placeholder:"选择时间范围",align:"right"},on:{change:t.dateChanged},model:{value:t.global_time_filter_value,callback:function(e){t.global_time_filter_value=e},expression:"global_time_filter_value"}})],1)])],1)},staticRenderFns:[]}},680:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(81),i=(a.n(r),a(123));e.default={name:"MasterDetailChart",props:{MasterApi:{type:String},DetailApi:{type:String},panelTitle:[String],masterChartTitle:[String],detailChartTitle:[String],clearingType:[String],startDate:[String],endDate:[String]},watch:{startDate:function(){this.loadMasterData()},endDate:function(){this.loadMasterData()}},methods:{clearChartData:function(){var t=this;t.$clearChartData(t,"detailChart"),t.loadingDetailChart=!0,t.loadingDetailChartText="暂无数据"},loadMasterData:function(){var t=this;t.loadingMasterChart=!0,t.loadingMasterChartText="加载中...",t.clearChartData(),i[t.MasterApi]({platform:t.$platformId,startDate:t.startDate,endDate:t.endDate}).then(function(e){t.loadingMasterChart=!1;var a=e.data;0===a.seriesData.length&&(t.loadingMasterChart=!0,t.loadingMasterChartText="暂无数据"),t.loadMasterOption(a)}).catch(function(e){console.log(e),t.loadingMasterChart=!0})},loadDetailData:function(t){var e=this,a=e.$platformId,r=e.startDate,n=e.endDate;e.loadingDetailChart=!0,e.loadingDetailChartText="加载中...",i[e.DetailApi]({platform:a,startDate:r,endDate:n,code:t,clearing_type:e.clearingType}).then(function(t){e.loadingDetailChart=!1;var a=t.data;0===a.seriesData.length&&(e.loadingDetailChart=!0,e.loadingDetailChartText="暂无数据"),e.loadDetailOption(a)}).catch(function(t){console.log(t)})},loadMasterOption:function(t){function e(t){var e=a.masterSeriesData[t.dataIndex];e&&(a.industryName=e.name+a.detailChartTitle,a.loadDetailData(e.code))}var a=this,r=t;if(r.seriesData.length>0){r.seriesData[0].selected=!0;var i=r.seriesData[0].code;a.industryName=r.seriesData[0].name+a.detailChartTitle,a.$nextTick(function(){a.loadDetailData(i)})}else a.clearChartData();a.masterSeriesData=r.seriesData;var n={color:["#1c7099","#1790cf","#1bb2d8","#99d2dd","#88b0bb","#22b1e6","#4598ff"],tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:a.masterChartTitle,type:"pie",selectedMode:"single",radius:["30%","60%"],center:["50%","55%"],data:r.seriesData,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};a.$initChart(a,"masterChart",n),a.masterChart.off("click"),a.masterChart.on("click",e)},loadDetailOption:function(t){var e=this,a=t,r={color:["#1790cf","#3ab882","#fcb738","#99d2dd","#88b0bb","#22b1e6","#4598ff"],tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:e.industryName,type:"pie",radius:["30%","60%"],center:["50%","55%"],data:a.seriesData,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};e.$initChart(e,"detailChart",r)}},mounted:function(){function t(){a&&clearTimeout(a),a=setTimeout(function(){["masterChart","detailChart"].forEach(function(t){e[t]&&e[t].resize()},this)},100)}var e=this;this.loadMasterData(),window.addEventListener("resize",t,!1);var a},data:function(){return{loadingMasterChart:!1,loadingMasterChartText:"加载中...",loadingDetailChart:!1,loadingDetailChartText:"加载中...",industryName:""}}}},696:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(123),i=a(636),n=a(660),o=a.n(n),l=a(781),s=a.n(l),d=a(81),c=(a.n(d),a(265));a.n(c);e.default={name:"DealingOverall",components:{rangeDatePicker:o.a,masterDetailChart:s.a},created:function(){var t=this.$route.query;t.startDate&&t.endDate&&(this.startDate=t.startDate,this.endDate=t.endDate)},computed:{tableDataPeriod:function(){return i.a.formatDate(this.startDate)+" - "+i.a.formatDate(this.endDate)}},methods:{getRangeDate:function(t){var e=t.startDate,a=t.endDate;this.startDate=e,this.endDate=a,this.loadAllData()},loadAllData:function(){var t=this;t.loadTableData();var e=t.$platformId,i=t.startDate,n=t.endDate;t.loadingdealTranslateChart=!0,t.loadingdealTranslateChartText="加载中...",a.i(r.dealTranslate)({platform:e,startDate:i,endDate:n}).then(function(e){t.loadingdealTranslateChart=!1;var a=e.data;0===a.seriesData.length&&(t.loadingdealTranslateChart=!0,t.loadingdealTranslateChartText="暂无数据"),t.loadtradeTrackChart(a)}).catch(function(t){console.log(t)}),t.loadingdeliverGoodsChart=!0,t.loadingdeliverGoodsChartText="加载中...",a.i(r.dealDelivery)({platform:e,startDate:i,endDate:n}).then(function(e){t.loadingdeliverGoodsChart=!1;var a=e.data;0===a.seriesData.length&&(t.loadingdeliverGoodsChart=!0,t.loadingdeliverGoodsChartText="暂无数据"),t.loaddeliverGoodsChart(a)}).catch(function(t){console.log(t)})},loadTableData:function(){var t=this,e=t.$platformId,i=this.startDate,n=this.endDate;t.loadingdealOperate=!0,a.i(r.dealOperate)({platform:e,startDate:i,endDate:n}).then(function(e){t.loadingdealOperate=!1;var a=e.data,r=a[0],i=a[1],n=[{title:"订单量",monthAmount:r.order_count,yearAmount:i.order_count},{title:"金额（万元）",monthAmount:r.order_money,yearAmount:i.order_money},{title:"支付笔数",monthAmount:r.payment_count,yearAmount:i.payment_count},{title:"支付金额（万元）",monthAmount:r.payment_money,yearAmount:i.payment_money}];t.tableData=n}).catch(function(t){console.log(t)})},loadtradeTrackChart:function(t){var e=this,a={color:["#1c7099","#1790cf","#1bb2d8","#99d2dd","#88b0bb","#22b1e6","#4598ff"],tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c}"},legend:{top:5,data:t.legendData},calculable:!0,series:[{name:t.seriesName,type:"funnel",left:"10%",top:60,bottom:60,width:"80%",sort:"descending",gap:2,label:{normal:{show:!0,position:"inside",textStyle:{color:"#000"}},emphasis:{textStyle:{fontSize:20,color:"#000"}}},labelLine:{normal:{length:10,lineStyle:{width:1,type:"solid"}}},itemStyle:{normal:{borderColor:"#fff",borderWidth:1}},data:t.seriesData}]};e.$initChart(e,"tradeTrackChart",a)},loaddeliverGoodsChart:function(t){var e=this,a={color:["#1c7099","#1790cf","#1bb2d8","#99d2dd","#88b0bb","#22b1e6","#4598ff"],tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:t.seriesName,type:"pie",radius:"55%",center:["50%","50%"],data:t.seriesData,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};e.$initChart(e,"deliverGoodsChart",a)}},mounted:function(){function t(){a&&clearTimeout(a),a=setTimeout(function(){e.tradeTrackChart&&e.tradeTrackChart.resize(),e.deliverGoodsChart&&e.deliverGoodsChart.resize()},100)}var e=this;e.loadAllData(),window.addEventListener("resize",t,!1);var a},data:function(){return{startDate:i.a.firstDayOfMonth().format(),endDate:(new Date).format(),loadingdealTranslateChart:!1,loadingdealTranslateChartText:"加载中...",loadingdeliverGoodsChart:!1,loadingdeliverGoodsChartText:"加载中...",loadingdealOperate:!1,tableData:[]}}}},722:function(t,e,a){e=t.exports=a(609)(),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"_dealingOverall.vue",sourceRoot:""}])},743:function(t,e,a){e=t.exports=a(609)(),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"DealingOverall.vue",sourceRoot:""}])},755:function(t,e,a){var r=a(722);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(610)("417e3ae6",r,!0)},776:function(t,e,a){var r=a(743);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(610)("23208c36",r,!0)},781:function(t,e,a){a(755);var r=a(80)(a(680),a(787),null,null);t.exports=r.exports},787:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"jm-grid-border-1px master-detail-view"},[a("header",{staticClass:"panel-header jm-grid-box-bg-white jm-grid-border-bottom-1px"},[t._v(t._s(t.panelTitle)+"\n  ")]),t._v(" "),a("el-col",{attrs:{xs:24,sm:24,md:24,lg:12}},[a("div",{staticClass:"grid-content jm-grid-box-bg-white "},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingMasterChart,expression:"loadingMasterChart"}],staticClass:"box sixteen-nine",class:{"no-data":"暂无数据"===t.loadingMasterChartText},attrs:{"element-loading-text":t.loadingMasterChartText}},[a("div",{ref:"masterChart",staticClass:"content"})])])]),t._v(" "),a("el-col",{attrs:{xs:24,sm:24,md:24,lg:12}},[a("div",{staticClass:"grid-content jm-grid-box-bg-white "},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingDetailChart,expression:"loadingDetailChart"}],staticClass:"box sixteen-nine",class:{"no-data":"暂无数据"===t.loadingDetailChartText},attrs:{"element-loading-text":t.loadingDetailChartText}},[a("div",{ref:"detailChart",staticClass:"content"})])])])],1)},staticRenderFns:[]}},808:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{separator:">"}},[a("span",{staticClass:"el-breadcrumb__item"},[a("span",[t._v("我的位置：")])]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v(t._s(t.$platformName))]),t._v(" "),a("el-breadcrumb-item",[t._v("运营情况")]),t._v(" "),a("el-breadcrumb-item",[t._v("成交分析")]),t._v(" "),a("el-breadcrumb-item",[t._v("总体情况")])],1),t._v(" "),a("range-date-picker",{on:{selectedRangeDate:t.getRangeDate}}),t._v(" "),a("el-row",{staticClass:"jm-grid-border-1px"},[a("el-col",{attrs:{xs:24,sm:24,md:24,lg:24}},[a("div",{staticClass:"grid-content jm-grid-box-bg-white"},[a("header",{staticClass:"panel-header jm-grid-box-bg-white jm-grid-border-bottom-1px"},[t._v(t._s(t.tableDataPeriod)+"平台运营情况表\n\n        ")]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingdealOperate,expression:"loadingdealOperate"}],staticClass:"box ",attrs:{"element-loading-text":"加载中..."}},[a("div",{staticClass:"content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"title",label:"订单"}}),t._v(" "),a("el-table-column",{attrs:{prop:"monthAmount",label:t.tableDataPeriod}}),t._v(" "),a("el-table-column",{attrs:{prop:"yearAmount",label:"本年累计"}})],1)],1)])])])],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:24,md:24,lg:12}},[a("div",{staticClass:"grid-content jm-grid-box-bg-white jm-grid-border-1px"},[a("header",{staticClass:"panel-header jm-grid-border-bottom-1px"},[t._v("交易全平台 整体转化跟踪")]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingdealTranslateChart,expression:"loadingdealTranslateChart"}],staticClass:"box sixteen-nine",class:{"no-data":"暂无数据"===t.loadingdealTranslateChartText},attrs:{"element-loading-text":t.loadingdealTranslateChartText}},[a("div",{ref:"tradeTrackChart",staticClass:"content"})])])]),t._v(" "),a("el-col",{attrs:{xs:24,sm:24,md:24,lg:12}},[a("div",{staticClass:"grid-content jm-grid-box-bg-white jm-grid-border-1px"},[a("header",{staticClass:"panel-header jm-grid-border-bottom-1px"},[t._v("交易全平台 交货时间占比")]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingdeliverGoodsChart,expression:"loadingdeliverGoodsChart"}],staticClass:"box sixteen-nine",class:{"no-data":"暂无数据"===t.loadingdeliverGoodsChartText},attrs:{"element-loading-text":t.loadingdeliverGoodsChartText}},[a("div",{ref:"deliverGoodsChart",staticClass:"content"})])])])],1),t._v(" "),a("master-detail-chart",{attrs:{panelTitle:"交易全平台 合同方式占比",clearingType:"contract_type",masterChartTitle:"合同方式占比",detailChartTitle:"合同方式占比",startDate:t.startDate,endDate:t.endDate,MasterApi:"dealContract",DetailApi:"industryPieChartsDetail"}}),t._v(" "),a("master-detail-chart",{attrs:{panelTitle:"交易全平台 结算方式占比",clearingType:"clearing_type",masterChartTitle:"结算方式占比",detailChartTitle:"结算方式占比",startDate:t.startDate,endDate:t.endDate,MasterApi:"dealSettle",DetailApi:"industryPieChartsDetail"}}),t._v(" "),a("master-detail-chart",{attrs:{panelTitle:"交易全平台 支付方式占比",clearingType:"payment_type",masterChartTitle:"支付方式占比",detailChartTitle:"支付方式占比",startDate:t.startDate,endDate:t.endDate,MasterApi:"dealPay",DetailApi:"industryPieChartsDetail"}})],1)},staticRenderFns:[]}}});
//# sourceMappingURL=15.fb47054a489e4b0b3a64.js.map