webpackJsonp([14],{615:function(e,t,a){a(769);var r=a(80)(a(686),a(801),null,null);e.exports=r.exports},636:function(e,t,a){"use strict";function r(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e),a=t.getDay(),r=t.getDate(),n=r-a;return t.setDate(n),t}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e),a=t.getDay(),r=t.getDate(),n=6-a,i=r+n;return t.setDate(i),t}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e);return t.setDate(1),t}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e),a=t.getMonth(),r=a+1;return t.setMonth(r,0),t}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e),a=t.getMonth();return a>=0&&a<=2&&t.setMonth(0,1),a>=3&&a<=5&&t.setMonth(3,1),a>=6&&a<=8&&t.setMonth(6,1),a>=9&&a<=11&&t.setMonth(9,1),t}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e),a=t.getMonth();return a>=0&&a<=2&&t.setMonth(3,0),a>=3&&a<=5&&t.setMonth(6,0),a>=6&&a<=8&&t.setMonth(9,0),a>=9&&a<=11&&t.setMonth(12,0),t}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e);return t.setMonth(0,1),t}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e);return t.setMonth(12,0),t}function m(e){var t=e.match(/\d+/g),a=+t[0],r=+t[1],n=new Date(a,0,1),i=p(r),o=n.getTime()+i,l=n.setTime(o);return new Date(l)}function p(e){return 6048e5*(e-1)}function g(e){if(8!==e.length)return new Date;var t=+e.substring(0,4),a=Number(e.substring(4,6))-1,r=+e.substring(6,8);return new Date(t,a,r)}function f(e,t){return Math.round((t-e)/864e5)}function h(e){return 8!==e.length?new Date:+e.substring(0,4)+"年"+Number(e.substring(4,6))+"月"+ +e.substring(6,8)+"日"}String.prototype.padStart||(String.prototype.padStart=function(e,t){return e>>=0,t=String(t||" "),this.length>e?String(this):(e-=this.length,e>t.length&&(t+=t.repeat(e/t.length)),t.slice(0,e)+String(this))}),Date.prototype.format=function(){return""+this.getFullYear()+(this.getMonth()+1).toString().padStart(2,"0")+this.getDate().toString().padStart(2,"0")},t.a={firstDayOfWeek:n,lastDayOfWeek:i,firstDayOfMonth:o,lastDayOfMonth:l,firstDayOfQuarter:s,lastDayOfQuarter:u,firstDayOfYear:d,lastDayOfYear:c,getDayByWeek:m,numberWithCommas:r,parseDate:g,formatDate:h,daydiff:f}},642:function(e,t,a){e.exports={default:a(644),__esModule:!0}},643:function(e,t,a){"use strict";t.__esModule=!0;var r=a(642),n=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return(0,n.default)(e)}},644:function(e,t,a){a(264),a(646),e.exports=a(49).Array.from},645:function(e,t,a){"use strict";var r=a(59),n=a(125);e.exports=function(e,t,a){t in e?r.f(e,t,n(0,a)):e[t]=a}},646:function(e,t,a){"use strict";var r=a(60),n=a(124),i=a(259),o=a(261),l=a(260),s=a(126),u=a(645),d=a(263);n(n.S+n.F*!a(262)(function(e){Array.from(e)}),"Array",{from:function(e){var t,a,n,c,m=i(e),p="function"==typeof this?this:Array,g=arguments.length,f=g>1?arguments[1]:void 0,h=void 0!==f,v=0,A=d(m);if(h&&(f=r(f,g>2?arguments[2]:void 0,2)),void 0==A||p==Array&&l(A))for(t=s(m.length),a=new p(t);t>v;v++)u(a,v,h?f(m[v],v):m[v]);else for(c=A.call(m),a=new p;!(n=c.next()).done;v++)u(a,v,h?o(c,f,[n.value,v],!0):n.value);return a.length=v,a}})},657:function(e,t,a){"use strict";function r(e,t){o=t,e.$emit("pick",n(t))}function n(e){var t=new Date,a=new Date,r=new Date;if(1===e)r.setDate(1);else{var n=t.getMonth();t.setMonth(n-1,1),r=i.a.firstDayOfMonth(t),a=i.a.lastDayOfMonth(t)}return[r,a]}Object.defineProperty(t,"__esModule",{value:!0});var i=a(636),o=1;t.default={name:"rangeDatePicker2",created:function(){var e=new Date;e.setDate(1),this.global_time_filter_value[0]=e,o=1,this.loadDatePeriodByQuery()},data:function(){return{currentMonth:"primary",PreviousMonth:"",global_time_filter_value:[new Date,new Date],globalPickerOptions:{shortcuts:[{text:"本月",onClick:function(e){r(e,1)}},{text:"上月",onClick:function(e){r(e,2)}}]}}},methods:{dateChanged:function(){var e=this.global_time_filter_value[0].format(),t=this.global_time_filter_value[1].format();this.$router.push({path:this.$router.path,query:{startDate:e,endDate:t}}),this.$emit("selectedRangeDate",{startDate:e,endDate:t});var a=this.getPeriodIndex(this.global_time_filter_value[0],this.global_time_filter_value[1]);this.updateFilterButtonState(a),o=-1},selectDatePeriod:function(e){o=e,this.global_time_filter_value=n(e),this.updateFilterButtonState(o)},loadDatePeriodByQuery:function(){var e=this.$route.query;if(e.startDate&&e.endDate){var t=e.startDate,a=e.endDate;t=i.a.parseDate(t),a=i.a.parseDate(a);var r=this.getPeriodIndex(t,a);o=-1,this.updateFilterButtonState(r),this.global_time_filter_value=[t,a]}},getPeriodIndex:function(e,t){var a=i.a.daydiff(e,t);if(a+1===t.getDate()&&t.format()===(new Date).format())a=1;else{var r=new Date,n=r.getMonth();r.setMonth(n,0);var o=new Date;o.setMonth(n-1,1),a=r.format()===t.format()&&e.format()===o.format()?2:-1}return a},updateFilterButtonState:function(e){switch(e){case 1:this.currentMonth="primary",this.PreviousMonth="";break;case 2:this.currentMonth="",this.PreviousMonth="primary";break;default:this.currentMonth="",this.PreviousMonth=""}}},mounted:function(){function e(){document.body.scrollTop>113?(t.style.position="fixed",t.style.top="40px",t.style.left="192px",t.style.right="20px",t.style.zIndex=4e4):(t.style.position="static",t.style.top="",t.style.left="",t.style.right="")}window.addEventListener("resize",e,!1),window.addEventListener("scroll",e,!1);var t=document.querySelector(".primary-timer-filter")}}},658:function(e,t,a){t=e.exports=a(609)(),t.push([e.i,".primary-timer-filter .el-button{padding-top:8px;padding-bottom:8px}","",{version:3,sources:["F:/Developer/2016/big-data/jmdata/code/jmbi/trunk/jmbi-web/src/main/webapp/app-trade-bi/src/components/RangeDatePicker2.vue"],names:[],mappings:"AACA,iCACE,gBAAiB,AACjB,kBAAoB,CACrB",file:"RangeDatePicker2.vue",sourcesContent:["\n.primary-timer-filter .el-button {\n  padding-top: 8px;\n  padding-bottom: 8px;\n}\n"],sourceRoot:""}])},659:function(e,t,a){var r=a(658);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(610)("b796cc2c",r,!0)},660:function(e,t,a){a(659);var r=a(80)(a(657),a(661),null,null);e.exports=r.exports},661:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"jm-grid-box-border-radius jm-grid-box-bg-white jm-grid-border-1px jm-padding-15X20 jm-margin-top20 jm-margin-bottom20 primary-timer-filter"},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[a("span",[e._v("时间段选择：")]),e._v(" "),a("el-button",{attrs:{type:e.currentMonth},on:{click:function(t){e.selectDatePeriod(1)}}},[e._v("本月")]),e._v(" "),a("el-button",{attrs:{type:e.PreviousMonth},on:{click:function(t){e.selectDatePeriod(2)}}},[e._v("上月")])],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content clearfix"},[a("el-date-picker",{staticClass:"right",attrs:{editable:!1,clearable:!1,type:"daterange","picker-options":e.globalPickerOptions,placeholder:"选择时间范围",align:"right"},on:{change:e.dateChanged},model:{value:e.global_time_filter_value,callback:function(t){e.global_time_filter_value=t},expression:"global_time_filter_value"}})],1)])],1)},staticRenderFns:[]}},686:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(643),n=a.n(r),i=a(123),o=a(636),l=a(660),s=a.n(l),u=a(81),d=a.n(u),c=a(265);a.n(c);t.default={name:"geographicalAmount",components:{rangeDatePicker:s.a},created:function(){var e=this.$route.query;e.startDate&&e.endDate&&(this.startDate=e.startDate,this.endDate=e.endDate)},methods:{getRangeDate:function(e){var t=e.startDate,a=e.endDate;this.startDate=t,this.endDate=a,this.loadAllData()},loadAllData:function(){this.loadBuyerData(this.buyerType),this.loadSellerData(this.sellerType)},getBuyerPrimary:function(e){return this.buyerType===e?"primary":""},getSellerPrimary:function(e){return this.sellerType===e?"primary":""},loadBuyerData:function(e){var t=this,r=t.$platformId,n=t.startDate,o=t.endDate;t.buyerType=e,t.panelTitle2="ordernum"===e?"订单笔数地域分布":"订单金额地域分布",t.primaryBuyer1=t.getBuyerPrimary("ordernum"),t.primaryBuyer2=t.getBuyerPrimary("paytotal"),t.loadingdealAreaAmountBuyerMap=!0,t.loadingdealAreaAmountBuyerBar=!0,t.loadingdealAreaAmountBuyerText="加载中...",a.i(i.dealAreaAmount)({platform:r,startDate:n,endDate:o,role:"buyer",sortField:e}).then(function(a){t.loadingdealAreaAmountBuyerMap=!1,t.loadingdealAreaAmountBuyerBar=!1;var r=a.data;0===r.length&&(t.loadingdealAreaAmountBuyerBar=!0,t.loadingdealAreaAmountBuyerText="暂无数据"),t.loadOrderAmountMapChart(r,e,"buyerOrderAmountMapChart");var n=[],i=[];r.forEach(function(t){n.push(t.area_name),i.push(t[e])}),t.loadOrderAmountBarChart({yAxisData:n,seriesData:i},e,"buyerOrderAmountBarChart")}).catch(function(e){console.log(e)})},loadSellerData:function(e){var t=this,r=t.$platformId,n=t.startDate,o=t.endDate;t.sellerType=e,t.panelTitle1="ordernum"===e?"订单笔数地域分布":"订单金额地域分布",t.primarySeller1=t.getSellerPrimary("ordernum"),t.primarySeller2=t.getSellerPrimary("paytotal"),t.loadingdealAreaAmountSellerMap=!0,t.loadingdealAreaAmountSellerBar=!0,t.loadingdealAreaAmountSellerText="加载中...",a.i(i.dealAreaAmount)({platform:r,startDate:n,endDate:o,role:"seller",sortField:e}).then(function(a){t.loadingdealAreaAmountSellerMap=!1,t.loadingdealAreaAmountSellerBar=!1;var r=a.data;0===r.length&&(t.loadingdealAreaAmountSellerBar=!0,t.loadingdealAreaAmountSellerText="暂无数据"),t.loadOrderAmountMapChart(r,e,"sellerOrderAmountMapChart");var n=[],i=[];r.forEach(function(t){n.push(t.area_name),i.push(t[e])}),t.loadOrderAmountBarChart({yAxisData:n,seriesData:i},e,"sellerOrderAmountBarChart")}).catch(function(e){console.log(e)})},loadOrderAmountMapChart:function(e,t,a){var r=this;r[a]=d.a.init(r.$refs[a]);var n="ordernum"===t?"笔数":"金额",i="笔";i="ordernum"===t?"笔":"万元";var o=0;e.forEach(function(e){var a=Number(e[t]);a>o&&(o=a)}),0===o&&(o=255);var l={tooltip:{trigger:"item",formatter:function(e){var t=isNaN(e.value)?"-":e.value+i;return e.seriesName+"<br />"+e.name+": "+t}},legend:{show:!1,orient:"vertical",left:"left",data:[t]},visualMap:{min:0,max:o,left:"left",top:"bottom",text:["高","低"],inRange:{color:["#e0ffff","#006edd"]},calculable:!0},series:[{name:"订单"+n+"地域分布",type:"map",mapType:"china",roam:!0,label:{normal:{show:!0},emphasis:{show:!0}},data:e.map(function(e){var a=e.area_name||"";return a=a.replace("自治区",""),a=a.replace("省",""),a=a.replace("市",""),{name:a,value:e[t]}})}]};r[a].setOption(l)},loadOrderAmountBarChart:function(e,t,a){var r=this;r[a]=d.a.init(r.$refs[a]);var i="ordernum"===t?"笔数":"金额",o={type:"value",axisLine:{lineStyle:{color:"#008acd"}}};if("ordernum"===t){o.name="笔";var l=Math.max.apply(Math,n()(e.seriesData));l<5&&l>0&&(o.splitNumber=l,o.minInterval=1)}else o.name="万元";var s={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{top:"8%",left:"8%",right:"6%",bottom:"8%",containLabel:!0},xAxis:o,yAxis:{type:"category",splitLine:{show:!0},axisLine:{lineStyle:{color:"#008acd"}},axisLabel:{formatter:function(e,t){var e=e||"";return e.length>15&&(e=e.substring(0,15)+"..."),e},rotate:20},data:e.yAxisData.reverse()},series:[{name:"订单"+i+"地域分布",type:"bar",barWidth:"20px",itemStyle:{normal:{color:"#1790cf",barBorderRadius:2}},data:e.seriesData.reverse()}]};r[a].setOption(s)}},mounted:function(){function e(){a&&clearTimeout(a),a=setTimeout(function(){t.sellerOrderAmountMapChart&&t.sellerOrderAmountMapChart.resize(),t.sellerOrderAmountBarChart&&t.sellerOrderAmountBarChart.resize(),t.buyerOrderAmountMapChart&&t.buyerOrderAmountMapChart.resize(),t.buyerOrderAmountBarChart&&t.buyerOrderAmountBarChart.resize()},100)}var t=this;t.loadAllData(),window.addEventListener("resize",e,!1);var a},data:function(){return{startDate:o.a.firstDayOfMonth().format(),endDate:(new Date).format(),loadingTODOChart:!1,buyerType:"ordernum",primaryBuyer1:"primary",primaryBuyer2:"",sellerType:"ordernum",primarySeller1:"primary",primarySeller2:"",loadingdealAreaAmountBuyerMap:!1,loadingdealAreaAmountBuyerBar:!1,loadingdealAreaAmountBuyerText:"加载中...",loadingdealAreaAmountSellerMap:!1,loadingdealAreaAmountSellerBar:!1,loadingdealAreaAmountSellerText:"加载中...",panelTitle1:"订单笔数地域分布",panelTitle2:"订单笔数地域分布"}}}},736:function(e,t,a){t=e.exports=a(609)(),t.push([e.i,".box-title{background:#fff;text-align:center;padding:10px;font-size:16px}.box-title span{display:inline-block;padding:10px 65px;border-radius:5px;color:#fff;background:#0086e9}.geographical-amount-btn-wrapper{background:#fff;padding-left:30px}","",{version:3,sources:["F:/Developer/2016/big-data/jmdata/code/jmbi/trunk/jmbi-web/src/main/webapp/app-trade-bi/src/views/GeographicalAmount.vue"],names:[],mappings:"AACA,WACE,gBAAiB,AACjB,kBAAmB,AACnB,aAAc,AACd,cAAgB,CACjB,AACD,gBACE,qBAAsB,AACtB,kBAAmB,AACnB,kBAAmB,AACnB,WAAY,AACZ,kBAAoB,CACrB,AACD,iCACE,gBAAiB,AACjB,iBAAmB,CACpB",file:"GeographicalAmount.vue",sourcesContent:["\n.box-title {\r\n  background: #fff;\r\n  text-align: center;\r\n  padding: 10px;\r\n  font-size: 16px;\n}\n.box-title span {\r\n  display: inline-block;\r\n  padding: 10px 65px;\r\n  border-radius: 5px;\r\n  color: #fff;\r\n  background: #0086e9;\n}\n.geographical-amount-btn-wrapper {\r\n  background: #fff;\r\n  padding-left: 30px;\n}\r\n"],sourceRoot:""}])},769:function(e,t,a){var r=a(736);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(610)("0182e69e",r,!0)},801:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{separator:">"}},[a("span",{staticClass:"el-breadcrumb__item"},[a("span",[e._v("我的位置：")])]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v(e._s(e.$platformName))]),e._v(" "),a("el-breadcrumb-item",[e._v("运营情况")]),e._v(" "),a("el-breadcrumb-item",[e._v("成交分析")]),e._v(" "),a("el-breadcrumb-item",[e._v("地域金额")])],1),e._v(" "),a("range-date-picker",{on:{selectedRangeDate:e.getRangeDate}}),e._v(" "),a("el-row",{staticClass:"jm-grid-border-1px"},[a("header",{staticClass:"panel-header jm-grid-box-bg-white jm-grid-border-bottom-1px"},[e._v(e._s(e.panelTitle1)+"\n\n    ")]),e._v(" "),a("div",{staticClass:"box-title"},[a("span",[e._v("卖家")])]),e._v(" "),a("div",{staticClass:"geographical-amount-btn-wrapper"},[a("el-button",{attrs:{size:"small",type:e.primarySeller1},on:{click:function(t){e.loadSellerData("ordernum")}}},[e._v("笔数")]),e._v(" "),a("el-button",{attrs:{size:"small",type:e.primarySeller2},on:{click:function(t){e.loadSellerData("paytotal")}}},[e._v("金额")])],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:24,md:24,lg:12}},[a("div",{staticClass:"grid-content jm-grid-box-bg-white"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingdealAreaAmountSellerMap,expression:"loadingdealAreaAmountSellerMap"}],staticClass:"box chart row-group-last",attrs:{"element-loading-text":"加载中..."}},[a("div",{ref:"sellerOrderAmountMapChart",staticClass:"content"})])])]),e._v(" "),a("el-col",{attrs:{xs:24,sm:24,md:24,lg:12}},[a("div",{staticClass:"grid-content jm-grid-box-bg-white "},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingdealAreaAmountSellerBar,expression:"loadingdealAreaAmountSellerBar"}],staticClass:"box  chart row-group-last",class:{"no-data":"暂无数据"===e.loadingdealAreaAmountSellerText},attrs:{"element-loading-text":e.loadingdealAreaAmountSellerText}},[a("div",{ref:"sellerOrderAmountBarChart",staticClass:"content"})])])])],1),e._v(" "),a("el-row",{staticClass:"jm-grid-border-1px"},[a("header",{staticClass:"panel-header jm-grid-box-bg-white jm-grid-border-bottom-1px"},[e._v(e._s(e.panelTitle2)+"\n\n    ")]),e._v(" "),a("div",{staticClass:"box-title"},[a("span",[e._v("买家")])]),e._v(" "),a("div",{staticClass:"geographical-amount-btn-wrapper"},[a("el-button",{attrs:{size:"small",type:e.primaryBuyer1},on:{click:function(t){e.loadBuyerData("ordernum")}}},[e._v("笔数")]),e._v(" "),a("el-button",{attrs:{size:"small",type:e.primaryBuyer2},on:{click:function(t){e.loadBuyerData("paytotal")}}},[e._v("金额")])],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:24,md:24,lg:12}},[a("div",{staticClass:"grid-content jm-grid-box-bg-white"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingdealAreaAmountBuyerMap,expression:"loadingdealAreaAmountBuyerMap"}],staticClass:"box chart row-group-last",attrs:{"element-loading-text":"加载中..."}},[a("div",{ref:"buyerOrderAmountMapChart",staticClass:"content"})])])]),e._v(" "),a("el-col",{attrs:{xs:24,sm:24,md:24,lg:12}},[a("div",{staticClass:"grid-content jm-grid-box-bg-white "},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingdealAreaAmountBuyerBar,expression:"loadingdealAreaAmountBuyerBar"}],staticClass:"box  chart row-group-last",class:{"no-data":"暂无数据"===e.loadingdealAreaAmountBuyerText},attrs:{"element-loading-text":e.loadingdealAreaAmountBuyerText}},[a("div",{ref:"buyerOrderAmountBarChart",staticClass:"content"})])])])],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=GeographicalAmount.85986aa40f1bb852e8e1.js.map